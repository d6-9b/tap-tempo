!function(){function e(){var e,n=t("Blink"),i=n.classList;return{element:n,tick:function(){i.add("light"),clearTimeout(e),e=setTimeout(function(){i.remove("light")},100)}}}function n(e,n){function i(e){g=e,E.add("active"),L=setInterval(u,50)}function a(){clearInterval(L),E.remove("active")}function u(){var e=h.getBoundingClientRect(),t=h.offsetWidth,i=g.clientX-e.left-t/2;C+=.001*i,o(),n(C)}function o(){s.nodeValue=Math.floor(C);var e=Math.floor(C%1*100);10>e&&(e="0"+e),c.nodeValue=e}var d="Field",l=t(d+"-label");l.appendChild(r(e+":"));var c=r(""),f=t(d+"-precision");f.appendChild(r(".")),f.appendChild(c);var s=r(""),v=t(d+"-leftArrow");v.appendChild(r("◀"));var p=t(d+"-rightArrow");p.appendChild(r("▶"));var h=t(d+"-value");h.appendChild(s),h.appendChild(f),h.appendChild(v),h.appendChild(p);var m=t(d);m.appendChild(l),m.appendChild(h),m.addEventListener("mousedown",function(e){function n(e){e.preventDefault(),g=e}function t(e){e.preventDefault(),a(),removeEventListener("mousemove",n),removeEventListener("mouseup",t)}e.preventDefault(),T?T=!1:(addEventListener("mousemove",n),addEventListener("mouseup",t),i(e))}),m.addEventListener("touchstart",function(e){e.preventDefault(),T=!0;var n=e.changedTouches[0];D=n.identifier,i(n)}),m.addEventListener("touchmove",function(e){e.preventDefault(),T=!0;for(var n=e.changedTouches,t=0;t<n.length;t++){var i=n[t];if(i.identifier===D){g=i;break}}}),m.addEventListener("touchend",function(e){e.preventDefault(),T=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)n[t].identifier===D&&(D=null,a())});var C,g,L,E=h.classList,T=!1,D=null;return{element:m,addClass:function(e){m.classList.add(e)},setValue:function(e){C=e,o()}}}function t(e){var n=document.createElement("div");return n.className=e,n}function i(i){function r(){h.tick(),v=setTimeout(r,c),L.muted||i()}function o(){f.setValue(6e4/c)}function d(){s.setValue(c)}var l="MainPanel",c=500,f=n("BPM",function(e){c=6e4/e,d()});f.addClass(l+"-bpmField");var s=n("MS",function(e){c=e,o()});s.addClass(l+"-intervalField"),d();var v,p,h=e(),m=null,C=[],g=u(function(){var e=Date.now();if(null!==m){var n=e-m;C.push(n),C.length>4&&C.shift();var t=C.reduce(function(e,n){return e+n});c=t/C.length,o(),d(),clearTimeout(v),r(),clearTimeout(p),p=setTimeout(function(){m=null,C.splice(0)},4*c)}m=e}),L=a(),E=t(l+"-buttons");E.appendChild(h.element),E.appendChild(L.element);var T=t(l);return T.appendChild(f.element),T.appendChild(s.element),T.appendChild(E),T.appendChild(g.element),o(),r(),{element:T}}function a(){function e(){a.nodeValue=c.muted?"UNMUTE":"MUTE"}function n(){c.muted=!c.muted,localStorage.muted=JSON.stringify(c.muted),e(),o.add("active")}function i(){o.remove("active")}var a=r(""),u=t("MuteButton");u.appendChild(a),u.addEventListener("mousedown",function(e){function t(e){e.preventDefault(),i(),removeEventListener("mouseup",t)}e.preventDefault(),d?d=!1:(n(),addEventListener("mouseup",t))}),u.addEventListener("touchstart",function(e){if(e.preventDefault(),d=!0,null===l){var t=e.changedTouches[0];l=t.identifier,n()}}),u.addEventListener("touchend",function(e){e.preventDefault(),d=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)n[t].identifier===l&&(l=null,i())});var o=u.classList,d=!1,l=null,c={element:u,muted:function(){try{return JSON.parse(localStorage.muted)}catch(e){return!1}}()};return e(),c}function u(e){function n(){e(),u.add("active")}function i(){u.remove("active")}var a=t("TapButton");a.appendChild(r("TAP")),a.addEventListener("mousedown",function(e){function t(e){e.preventDefault(),o?o=!1:(i(),removeEventListener("mouseup",t))}e.preventDefault(),o?o=!1:(n(),addEventListener("mouseup",t))}),a.addEventListener("touchstart",function(e){if(e.preventDefault(),o=!0,null===d){var t=e.changedTouches[0];d=t.identifier,n()}}),a.addEventListener("touchend",function(e){e.preventDefault(),o=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)if(n[t].identifier===d){d=null,i();break}});var u=a.classList,o=!1,d=null;return{element:a}}function r(e){return document.createTextNode(e)}!function(){var e=new XMLHttpRequest;e.open("get","pulse.ogg"),e.responseType="arraybuffer",e.send(),e.onload=function(){var n,t=new AudioContext;t.decodeAudioData(e.response,function(e){var a=i(function(){n&&n.stop(),n=t.createBufferSource(),n.buffer=e,n.connect(t.destination),n.start()});document.body.appendChild(a.element)})}}()}();