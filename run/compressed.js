!function(){function e(){var e,n=t("Blink"),i=n.classList;return{element:n,tick:function(){i.add("light"),clearTimeout(e),e=setTimeout(function(){i.remove("light")},100)}}}function n(e,n){function i(e){g=e,E.add("active"),L=setInterval(r,50)}function a(){clearInterval(L),E.remove("active")}function r(){var e=h.getBoundingClientRect(),t=h.offsetWidth,i=g.clientX-e.left-t/2;C+=.001*i,d(),n(C)}function d(){s.nodeValue=Math.floor(C);var e=Math.floor(C%1*100);10>e&&(e="0"+e),c.nodeValue=e}var o="Field",l=t(o+"-label");l.appendChild(u(e+":"));var c=u(""),f=t(o+"-precision");f.appendChild(u(".")),f.appendChild(c);var s=u(""),v=t(o+"-leftArrow");v.appendChild(u("◀"));var p=t(o+"-rightArrow");p.appendChild(u("▶"));var h=t(o+"-value");h.appendChild(s),h.appendChild(f),h.appendChild(v),h.appendChild(p);var m=t(o);m.appendChild(l),m.appendChild(h),m.addEventListener("mousedown",function(e){function n(e){e.preventDefault(),g=e}function t(e){e.preventDefault(),a(),removeEventListener("mousemove",n),removeEventListener("mouseup",t)}e.preventDefault(),T?T=!1:(addEventListener("mousemove",n),addEventListener("mouseup",t),i(e))}),m.addEventListener("touchstart",function(e){e.preventDefault(),T=!0;var n=e.changedTouches[0];D=n.identifier,i(n)}),m.addEventListener("touchmove",function(e){e.preventDefault(),T=!0;for(var n=e.changedTouches,t=0;t<n.length;t++){var i=n[t];if(i.identifier===D){g=i;break}}}),m.addEventListener("touchend",function(e){e.preventDefault(),T=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)n[t].identifier===D&&(D=null,a())});var C,g,L,E=h.classList,T=!1,D=null;return{element:m,addClass:function(e){m.classList.add(e)},setValue:function(e){C=e,d()}}}function t(e){var n=document.createElement("div");return n.className=e,n}function i(i){function u(){h.tick(),v=setTimeout(u,c),L.muted||i()}function d(){f.setValue(6e4/c)}function o(){s.setValue(c)}var l="MainPanel",c=500,f=n("BPM",function(e){c=6e4/e,o()});f.addClass(l+"-bpmField");var s=n("MS",function(e){c=e,d()});s.addClass(l+"-intervalField"),o();var v,p,h=e(),m=null,C=[],g=r(function(){var e=Date.now();if(null!==m){var n=e-m;C.push(n),C.length>4&&C.shift();var t=C.reduce(function(e,n){return e+n});c=t/C.length,d(),o(),clearTimeout(v),u(),clearTimeout(p),p=setTimeout(function(){m=null,C.splice(0)},4*c)}m=e}),L=a(),E=t(l+"-buttons");E.appendChild(h.element),E.appendChild(L.element);var T=t(l+"-center");T.appendChild(f.element),T.appendChild(s.element),T.appendChild(E),T.appendChild(g.element);var D=t(l);return D.appendChild(T),d(),u(),{element:D,resize:function(){var e,n=innerWidth,t=innerHeight;t>n?(e=n/320,480*e>t&&(e=t/480)):(e=n/480,320*e>t&&(e=t/320)),D.style.transform="scale("+e+")"}}}function a(){function e(){a.nodeValue=c.muted?"UNMUTE":"MUTE"}function n(){c.muted=!c.muted,localStorage.muted=JSON.stringify(c.muted),e(),d.add("active")}function i(){d.remove("active")}var a=u(""),r=t("MuteButton");r.appendChild(a),r.addEventListener("mousedown",function(e){function t(e){e.preventDefault(),i(),removeEventListener("mouseup",t)}e.preventDefault(),o?o=!1:(n(),addEventListener("mouseup",t))}),r.addEventListener("touchstart",function(e){if(e.preventDefault(),o=!0,null===l){var t=e.changedTouches[0];l=t.identifier,n()}}),r.addEventListener("touchend",function(e){e.preventDefault(),o=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)n[t].identifier===l&&(l=null,i())});var d=r.classList,o=!1,l=null,c={element:r,muted:function(){try{return JSON.parse(localStorage.muted)}catch(e){return!1}}()};return e(),c}function r(e){function n(){e(),r.add("active")}function i(){r.remove("active")}var a=t("TapButton");a.appendChild(u("TAP")),a.addEventListener("mousedown",function(e){function t(e){e.preventDefault(),d?d=!1:(i(),removeEventListener("mouseup",t))}e.preventDefault(),d?d=!1:(n(),addEventListener("mouseup",t))}),a.addEventListener("touchstart",function(e){if(e.preventDefault(),d=!0,null===o){var t=e.changedTouches[0];o=t.identifier,n()}}),a.addEventListener("touchend",function(e){e.preventDefault(),d=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)if(n[t].identifier===o){o=null,i();break}});var r=a.classList,d=!1,o=null;return{element:a}}function u(e){return document.createTextNode(e)}!function(){var e=new XMLHttpRequest;e.open("get","pulse.ogg"),e.responseType="arraybuffer",e.send(),e.onload=function(){var n,t=new AudioContext;t.decodeAudioData(e.response,function(e){var a=i(function(){n&&n.stop(),n=t.createBufferSource(),n.buffer=e,n.connect(t.destination),n.start()});document.body.appendChild(a.element);var r=a.resize;addEventListener("resize",r),r()})}}()}();